<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flipit Demo</title>
    <style>
        /* Reset and base styles */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            overflow: hidden !important;
        }

        *::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }

        html {
            overflow: hidden !important;
            height: 100% !important;
            width: 100% !important;
            position: fixed;
        }

        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden !important;
            background: #1B2331;
            filter: grayscale(50%);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        #flipit-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1B2331;
            overflow: hidden !important;
        }

        #website-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: #1B2331;
            filter: grayscale(50%) contrast(110%);
            overflow: hidden !important;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .background-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1B2331;
            opacity: 0.1;
            pointer-events: none;
        }
    </style>
    <script src="https://embed.flipit.com"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let hasInteracted = false;
            
            function notifyParent(type) {
                window.parent.postMessage({
                    type: 'flipit-interaction',
                    interaction: type,
                    firstInteraction: !hasInteracted
                }, '*');
                hasInteracted = true;
            }

            // Prevent all scroll events
            const preventScroll = (e) => {
                e.preventDefault();
                e.stopPropagation();
                return false;
            };

            // Apply scroll prevention to document and body
            ['scroll', 'touchmove', 'wheel', 'mousewheel', 'DOMMouseScroll'].forEach(event => {
                document.addEventListener(event, preventScroll, { passive: false });
                document.body.addEventListener(event, preventScroll, { passive: false });
            });

            // Only track clicks
            document.addEventListener('click', () => {
                notifyParent('click');
            }, { passive: true });

            // Handle iframe content
            const frame = document.getElementById('website-frame');
            frame.addEventListener('load', function() {
                try {
                    const iframeDoc = frame.contentDocument || frame.contentWindow.document;
                    
                    // Inject styles into iframe
                    const style = document.createElement('style');
                    style.textContent = `
                        *, *::before, *::after {
                            scrollbar-width: none !important;
                            -ms-overflow-style: none !important;
                            overflow: hidden !important;
                        }
                        *::-webkit-scrollbar {
                            display: none !important;
                            width: 0 !important;
                            height: 0 !important;
                        }
                        html {
                            overflow: hidden !important;
                            height: 100% !important;
                            width: 100% !important;
                            position: fixed !important;
                        }
                        body {
                            overflow: hidden !important;
                            position: fixed !important;
                            width: 100% !important;
                            height: 100% !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            top: 0 !important;
                            left: 0 !important;
                            right: 0 !important;
                            bottom: 0 !important;
                        }
                    `;
                    iframeDoc.head.appendChild(style);

                    // Prevent scrolling in iframe content
                    ['scroll', 'touchmove', 'wheel', 'mousewheel', 'DOMMouseScroll'].forEach(event => {
                        iframeDoc.addEventListener(event, preventScroll, { passive: false });
                        iframeDoc.body.addEventListener(event, preventScroll, { passive: false });
                    });
                } catch (e) {
                    console.log('Could not inject styles into iframe due to same-origin policy');
                }
            });

            // Ensure the page stays fixed
            window.addEventListener('load', () => {
                document.body.style.position = 'fixed';
                document.documentElement.style.position = 'fixed';
            });
        });
    </script>
</head>
<body>
    <div id="flipit-container">
        <iframe
            id="website-frame"
            src="https://courageous-pastelito-7cae9d.netlify.app/"
            sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
            scrolling="no"
        ></iframe>
        <div class="background-overlay"></div>
    </div>
</body>
</html>